import{r as x,o as a,c as n,f as e,t as m,e as f,j as q,i as l,v as r,k as b,F as y,d as w,s as T}from"./index-c3b66281.js";import{u as k,_ as V}from"./index-c63d0c42.js";const M={class:"max-w-screen-md mx-auto px-4 py-10"},N={key:0,class:"mb-10 p-4 bg-light-grey rounded-md shadow-lg"},S={class:"text-at-light-green"},B={class:"text-red-500"},E={class:"p-8 flex items-start bg-light-grey rounded-md shadow-lg"},$=["onSubmit"],D=e("h1",{class:"text-2xl text-at-light-green"},"记录运动",-1),F={class:"flex flex-col"},j=e("label",{for:"workout-name",class:"mb-1 text-sm text-at-light-green"},"运动名称",-1),L={class:"flex flex-col"},W=e("label",{for:"workout-type",class:"mb-1 text-sm text-at-light-green"},"运动类型",-1),z=e("option",{value:"select-workout"},"选择类型",-1),A=e("option",{value:"strength"},"拉伸训练",-1),G=e("option",{value:"cardio"},"有氧运动",-1),H=[z,A,G],I={key:0,class:"flex flex-col gap-y-4"},J={class:"flex flex-col md:w-1/3"},K=e("label",{for:"exercise-name",class:"mb-1 text-sm text-at-light-green"},"拉伸名称 ",-1),O=["onUpdate:modelValue"],P={class:"flex flex-col flex-1"},Q=e("label",{for:"sets",class:"mb-1 text-sm text-at-light-green"},"组数 ",-1),R=["onUpdate:modelValue"],X={class:"flex flex-col flex-1"},Y=e("label",{for:"reps",class:"mb-1 text-sm text-at-light-green"},"次数 ",-1),Z=["onUpdate:modelValue"],ee={class:"flex flex-col flex-1"},te=e("label",{for:"weight",class:"mb-1 text-sm text-at-light-green"},"重量(kg) ",-1),oe=["onUpdate:modelValue"],se=["onClick"],le={key:1,class:"flex flex-col gap-y-4"},ae={class:"flex flex-col md:w-1/3"},ne=e("label",{for:"cardio-type",class:"mb-1 text-sm text-at-light-green"},"类型 ",-1),re=["onUpdate:modelValue"],ie=e("option",{value:"#"},"选择类型",-1),de=e("option",{value:"run"},"跑步",-1),ue=e("option",{value:"walk"},"步行",-1),ce=[ie,de,ue],xe={class:"flex flex-col flex-1"},pe=e("label",{for:"distance",class:"mb-1 text-sm text-at-light-green"},"距离 ",-1),he=["onUpdate:modelValue"],_e={class:"flex flex-col flex-1"},ge=e("label",{for:"duration",class:"mb-1 text-sm text-at-light-green"},"时间 ",-1),fe=["onUpdate:modelValue"],ve={class:"flex flex-col flex-1"},me=e("label",{for:"pace",class:"mb-1 text-sm text-at-light-green"},"步速 ",-1),be=["onUpdate:modelValue"],ye=["onClick"],we=e("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-at-light-green duration-200 border-solid border-2 border-transparent hover:border-at-light-green hover:bg-white hover:text-at-light-green"}," 记录一次锻炼 ",-1),Ce={__name:"Create",setup(ke){const p=x(""),i=x("select-workout"),s=x([]),h=x(null),u=x(null),_=()=>{if(i.value==="strength"){s.value.push({id:k(),exercise:"",sets:"",reps:"",weight:""});return}s.value.push({id:k(),cardioType:"",distance:"",duration:"",pace:""})},U=()=>{s.value=[],_()},v=d=>{if(s.value.length>1){s.value=s.value.filter(c=>c.id!==d);return}u.value="至少需要有一项运动记录",setTimeout(()=>{u.value=!1},5e3)},C=async()=>{try{const{error:d}=await T.from("workouts").insert([{workoutName:p.value,workoutType:i.value,exercises:s.value}]);if(d)throw d;h.value="成功创建一项运动记录",p.value=null,i.value="select-workout",s.value=[],setTimeout(()=>{h.value=null},5e3)}catch(d){u.value=`错误： ${d.message}`,setTimeout(()=>{u.value=null},5e3)}};return(d,c)=>(a(),n("div",M,[h.value||u.value?(a(),n("div",N,[e("p",S,m(h.value),1),e("p",B,m(u.value),1)])):f("",!0),e("div",E,[e("form",{onSubmit:q(C,["prevent"]),class:"flex flex-col gap-y-5 w-full"},[D,e("div",F,[j,l(e("input",{type:"text",required:"",class:"p-2 text-gray-500 focus:outline-none",id:"workout-name","onUpdate:modelValue":c[0]||(c[0]=t=>p.value=t)},null,512),[[r,p.value]])]),e("div",L,[W,l(e("select",{id:"workout-type",class:"p-2 text-gray-500 focus:outline-none",required:"",onChange:U,"onUpdate:modelValue":c[1]||(c[1]=t=>i.value=t)},H,544),[[b,i.value]])]),i.value==="strength"?(a(),n("div",I,[(a(!0),n(y,null,w(s.value,(t,g)=>(a(),n("div",{class:"flex flex-col gap-x-6 gap-y-2 relative md:flex-row",key:g},[e("div",J,[K,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.exercise=o},null,8,O),[[r,t.exercise]])]),e("div",P,[Q,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.sets=o},null,8,R),[[r,t.sets]])]),e("div",X,[Y,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.reps=o},null,8,Z),[[r,t.reps]])]),e("div",ee,[te,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.weight=o},null,8,oe),[[r,t.weight]])]),e("img",{onClick:o=>v(t.id),src:V,class:"h-4 w-auto absolute -left-5 cursor-pointer",alt:""},null,8,se)]))),128)),e("button",{onClick:_,type:"button",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-at-light-green duration-200 border-solid border-2 border-transparent hover:border-at-light-green hover:bg-white hover:text-at-light-green"}," 添加运动 ")])):f("",!0),i.value==="cardio"?(a(),n("div",le,[(a(!0),n(y,null,w(s.value,(t,g)=>(a(),n("div",{class:"flex flex-col gap-x-6 gap-y-2 relative md:flex-row",key:g},[e("div",ae,[ne,l(e("select",{id:"cardio-type",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.cardioType=o},ce,8,re),[[b,t.cardioType]])]),e("div",xe,[pe,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.distance=o},null,8,he),[[r,t.distance]])]),e("div",_e,[ge,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.duration=o},null,8,fe),[[r,t.duration]])]),e("div",ve,[me,l(e("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":o=>t.pace=o},null,8,be),[[r,t.pace]])]),e("img",{onClick:o=>v(t.id),src:V,class:"h-4 w-auto absolute -left-5 cursor-pointer",alt:""},null,8,ye)]))),128)),e("button",{onClick:_,type:"button",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-at-light-green duration-200 border-solid border-2 border-transparent hover:border-at-light-green hover:bg-white hover:text-at-light-green"}," 添加运动 ")])):f("",!0),we],40,$)])]))}};export{Ce as default};
